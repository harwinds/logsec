<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Configure cross-account access from an EC2 Instance to an AWS CodeCommit repo using roles | logsec</title><meta name=keywords content><meta name=description content="You can configure access to CodeCommit repositories for IAM Role attached to an EC2 Instance in another AWS account. This is often referred to as cross-account access. This section provides an example and instructions for configuring cross-account access for a repo named SharedDemoRepo in the US East (Ohio) Region in an AWS account (referred to as AccountA) to an IAM Role/Instance Profile attached to an EC2 Instance in another AWS account (referred to as AccountB)."><meta name=author content><link rel=canonical href=https://www.logsec.cloud/posts/cross-account-access-codecommit-repo/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.logsec.cloud/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://www.logsec.cloud/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://www.logsec.cloud/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://www.logsec.cloud/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://www.logsec.cloud/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Configure cross-account access from an EC2 Instance to an AWS CodeCommit repo using roles"><meta property="og:description" content="You can configure access to CodeCommit repositories for IAM Role attached to an EC2 Instance in another AWS account. This is often referred to as cross-account access. This section provides an example and instructions for configuring cross-account access for a repo named SharedDemoRepo in the US East (Ohio) Region in an AWS account (referred to as AccountA) to an IAM Role/Instance Profile attached to an EC2 Instance in another AWS account (referred to as AccountB)."><meta property="og:type" content="article"><meta property="og:url" content="https://www.logsec.cloud/posts/cross-account-access-codecommit-repo/"><meta property="og:image" content="https://www.logsec.cloud/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-01T00:00:00+00:00"><meta property="article:modified_time" content="2022-09-01T00:00:00+00:00"><meta property="og:site_name" content="logsec"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.logsec.cloud/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Configure cross-account access from an EC2 Instance to an AWS CodeCommit repo using roles"><meta name=twitter:description content="You can configure access to CodeCommit repositories for IAM Role attached to an EC2 Instance in another AWS account. This is often referred to as cross-account access. This section provides an example and instructions for configuring cross-account access for a repo named SharedDemoRepo in the US East (Ohio) Region in an AWS account (referred to as AccountA) to an IAM Role/Instance Profile attached to an EC2 Instance in another AWS account (referred to as AccountB)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.logsec.cloud/posts/"},{"@type":"ListItem","position":3,"name":"Configure cross-account access from an EC2 Instance to an AWS CodeCommit repo using roles","item":"https://www.logsec.cloud/posts/cross-account-access-codecommit-repo/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Configure cross-account access from an EC2 Instance to an AWS CodeCommit repo using roles","name":"Configure cross-account access from an EC2 Instance to an AWS CodeCommit repo using roles","description":"You can configure access to CodeCommit repositories for IAM Role attached to an EC2 Instance in another AWS account. This is often referred to as cross-account access. This section provides an example and instructions for configuring cross-account access for a repo named SharedDemoRepo in the US East (Ohio) Region in an AWS account (referred to as AccountA) to an IAM Role/Instance Profile attached to an EC2 Instance in another AWS account (referred to as AccountB).","keywords":[],"articleBody":"You can configure access to CodeCommit repositories for IAM Role attached to an EC2 Instance in another AWS account. This is often referred to as cross-account access. This section provides an example and instructions for configuring cross-account access for a repo named SharedDemoRepo in the US East (Ohio) Region in an AWS account (referred to as AccountA) to an IAM Role/Instance Profile attached to an EC2 Instance in another AWS account (referred to as AccountB).\nThis section is divided into three parts:\nPart 1: Actions for the IAM Role in AccountA Part 2: Actions for the IAM Role in AccountB Part 3: Configuration on EC2 Instance in AccountB Part 1: Actions for the IAM Role in AccountA To allow IAM Roles in AccountB to access a repository in AccountA, an AccountA administrator must:\nCreate a policy in AccountA that grants access to the repository. Create a role in AccountA that can be assumed by IAM Role in AccountB. Attach the policy to the role. The following sections provide steps and examples.\nStep 1: Create a policy for repo SharedDemoRepo access in AccountA {\r\"Version\": \"2012-10-17\",\r\"Statement\": [\r{\r\"Effect\": \"Allow\",\r\"Action\": [\r\"codecommit:BatchGet*\",\r\"codecommit:Create*\",\r\"codecommit:DeleteBranch\",\r\"codecommit:Get*\",\r\"codecommit:List*\",\r\"codecommit:Describe*\",\r\"codecommit:Put*\",\r\"codecommit:Post*\",\r\"codecommit:Merge*\",\r\"codecommit:Test*\",\r\"codecommit:Update*\",\r\"codecommit:GitPull\",\r\"codecommit:GitPush\"\r],\r\"Resource\": [\r\"arn:aws:codecommit:us-east-2:${ACCOUNTA_ID}:SharedDemoRepo\"\r]\r},\r{\r\"Effect\": \"Allow\",\r\"Action\": \"codecommit:ListRepositories\",\r\"Resource\": \"*\"\r}\r]\r} Step 2: Create a role for repo access in AccountA Create a new Role CrossAccountRepoAccessRole and attach the above policy to that role.\nPart 2: Actions for the IAM Role in AccountB To allow an EC2 Instance in AccountB to access a repository in AccountA, the AccountB administrator must create a IAM Role that can be attached to an EC2 Instance in AccountB. This role must be configured with a policy that allows the EC2 Instance to assume the role created in the AccountA.\nThe following sections provide steps and examples.\nStep 1: Create a policy for repo access in AccountB {\r\"Version\": \"2012-10-17\",\r\"Statement\": {\r\"Effect\": \"Allow\",\r\"Action\": \"sts:AssumeRole\",\r\"Resource\": \"arn:aws:iam::${ACCOUNTA_ID}:role/CrossAccountRepoAccessRole\"\r}\r} Step 2: Create a role for an AWS Service “EC2” Create a new Role CrossAccountRepoAccessRole for an AWS Service “EC2” (it will create the following trust relationship for the role to be assummed from an EC2 Instance ) and attach the above policy to that role.\n{\r\"Version\": \"2012-10-17\",\r\"Statement\": [\r{\r\"Effect\": \"Allow\",\r\"Principal\": {\r\"Service\": \"ec2.amazonaws.com\"\r},\r\"Action\": \"sts:AssumeRole\"\r}\r]\r} Part 3: Configuration on EC2 Instance in AccountB To access the repositories in AccountA, users in the AccountB must configure the EC2 Instance for repositories access. The following sections provide steps and examples.\nPrerequisite: Please make sure AWS CLI and git package is installed.\nStep 1: Configure the AWS CLI and Git for an AccountB EC2 Instance to access the repositories in AccountA You need to configure the AWS CLI either by using the aws configure --profile command or editing the ~/.aws/config file.\n[profile cross-account-role]\rrole_arn = arn:aws:iam::${ACCOUNTA_ID}:role/CrossAccountRepoAccessRole\rcredential_source = Ec2InstanceMetadata\rregion = us-east-2 You then want to confirm whether you’ve set your permissions correctly, you can do:\naws --profile cross-account-role get-repository --repository-name ${REPO_NAME_IN_ACCOUNTA}` Once above is successful, you can configure the git client to use the credential-helper with the correct profile, in your ~/.gitconfig by running:\ngit config --global credential.helper '!aws codecommit --profile '\"$PROFILE_NAME\"' credential-helper $@'\rgit config --global credential.UseHttpPath true git clone --branch ${BRANCH_NAME} ${REPO_NAME_IN_ACCOUNTA}` Conlusion You can keep your code in CodeCommit Repositories in a central AWS Account and can access from different AWS Accounts using the IAM Roles. Please don’t forget to follow the principle of least privileges while configuring above policies in Production environments.\nHope you find this post helpful.\nReferences Configure cross-account access to an AWS CodeCommit repository using roles Installing or updating the latest version of the AWS CLI ","wordCount":"625","inLanguage":"en","datePublished":"2022-09-01T00:00:00Z","dateModified":"2022-09-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.logsec.cloud/posts/cross-account-access-codecommit-repo/"},"publisher":{"@type":"Organization","name":"logsec","logo":{"@type":"ImageObject","url":"https://www.logsec.cloud/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.logsec.cloud accesskey=h title="logsec (Alt + H)">logsec</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.logsec.cloud/ title=posts><span>posts</span></a></li><li><a href=https://www.logsec.cloud/pages/about title=about><span>about</span></a></li><li><a href=https://www.logsec.cloud/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.logsec.cloud>Home</a>&nbsp;»&nbsp;<a href=https://www.logsec.cloud/posts/>Posts</a></div><h1 class=post-title>Configure cross-account access from an EC2 Instance to an AWS CodeCommit repo using roles</h1><div class=post-meta><span title='2022-09-01 00:00:00 +0000 UTC'>September 1, 2022</span>&nbsp;·&nbsp;3 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#part-1-actions-for-the-iam-role-in-accounta aria-label="Part 1: Actions for the IAM Role in AccountA">Part 1: Actions for the IAM Role in AccountA</a><ul><li><a href=#step-1-create-a-policy-for-repo-shareddemorepo-access-in-accounta aria-label="Step 1: Create a policy for repo SharedDemoRepo access in AccountA">Step 1: Create a policy for repo <code>SharedDemoRepo</code> access in AccountA</a></li><li><a href=#step-2-create-a-role-for-repo-access-in-accounta aria-label="Step 2: Create a role for repo access in AccountA">Step 2: Create a role for repo access in AccountA</a></li></ul></li><li><a href=#part-2-actions-for-the-iam-role-in-accountb aria-label="Part 2: Actions for the IAM Role in AccountB">Part 2: Actions for the IAM Role in AccountB</a><ul><li><a href=#step-1-create-a-policy-for-repo-access-in-accountb aria-label="Step 1: Create a policy for repo access in AccountB">Step 1: Create a policy for repo access in AccountB</a></li><li><a href=#step-2-create-a-role-for-an-aws-service-ec2 aria-label="Step 2: Create a role for an AWS Service &amp;ldquo;EC2&amp;rdquo;">Step 2: Create a role for an AWS Service &ldquo;EC2&rdquo;</a></li></ul></li><li><a href=#part-3-configuration-on-ec2-instance-in-accountb aria-label="Part 3: Configuration on EC2 Instance in AccountB">Part 3: Configuration on EC2 Instance in AccountB</a><ul><li><a href=#step-1-configure-the-aws-cli-and-git-for-an-accountb-ec2-instance-to-access-the-repositories-in-accounta aria-label="Step 1: Configure the AWS CLI and Git for an AccountB EC2 Instance to access the repositories in AccountA">Step 1: Configure the AWS CLI and Git for an AccountB EC2 Instance to access the repositories in AccountA</a></li></ul></li></ul><li><a href=#conlusion aria-label=Conlusion>Conlusion</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>You can configure access to CodeCommit repositories for IAM Role attached to an EC2 Instance in another AWS account. This is often referred to as cross-account access. This section provides an example and instructions for configuring cross-account access for a repo named <code>SharedDemoRepo</code> in the US East (Ohio) Region in an AWS account (referred to as AccountA) to an IAM Role/Instance Profile attached to an EC2 Instance in another AWS account (referred to as AccountB).</p><p>This section is divided into three parts:</p><ul><li>Part 1: Actions for the IAM Role in AccountA</li><li>Part 2: Actions for the IAM Role in AccountB</li><li>Part 3: Configuration on EC2 Instance in AccountB</li></ul><p><img loading=lazy src=/images/2022_09_05_cross_account_repo_access.svg#center alt></p><hr><h3 id=part-1-actions-for-the-iam-role-in-accounta>Part 1: Actions for the IAM Role in AccountA<a hidden class=anchor aria-hidden=true href=#part-1-actions-for-the-iam-role-in-accounta>#</a></h3><p>To allow IAM Roles in AccountB to access a repository in AccountA, an AccountA administrator must:</p><ul><li>Create a policy in AccountA that grants access to the repository.</li><li>Create a role in AccountA that can be assumed by IAM Role in AccountB.</li><li>Attach the policy to the role.</li></ul><p>The following sections provide steps and examples.</p><h4 id=step-1-create-a-policy-for-repo-shareddemorepo-access-in-accounta>Step 1: Create a policy for repo <code>SharedDemoRepo</code> access in AccountA<a hidden class=anchor aria-hidden=true href=#step-1-create-a-policy-for-repo-shareddemorepo-access-in-accounta>#</a></h4><pre tabindex=0><code>{
    &#34;Version&#34;: &#34;2012-10-17&#34;,
    &#34;Statement&#34;: [
        {
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Action&#34;: [
                &#34;codecommit:BatchGet*&#34;,
                &#34;codecommit:Create*&#34;,
                &#34;codecommit:DeleteBranch&#34;,
                &#34;codecommit:Get*&#34;,
                &#34;codecommit:List*&#34;,
                &#34;codecommit:Describe*&#34;,
                &#34;codecommit:Put*&#34;,
                &#34;codecommit:Post*&#34;,
                &#34;codecommit:Merge*&#34;,
                &#34;codecommit:Test*&#34;,
                &#34;codecommit:Update*&#34;,
                &#34;codecommit:GitPull&#34;,
                &#34;codecommit:GitPush&#34;
            ],
            &#34;Resource&#34;: [
                &#34;arn:aws:codecommit:us-east-2:${ACCOUNTA_ID}:SharedDemoRepo&#34;
            ]
        },
        {
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Action&#34;: &#34;codecommit:ListRepositories&#34;,
            &#34;Resource&#34;: &#34;*&#34;
        }
    ]
}
</code></pre><h4 id=step-2-create-a-role-for-repo-access-in-accounta>Step 2: Create a role for repo access in AccountA<a hidden class=anchor aria-hidden=true href=#step-2-create-a-role-for-repo-access-in-accounta>#</a></h4><p>Create a new Role <code>CrossAccountRepoAccessRole</code> and attach the above policy to that role.</p><hr><h3 id=part-2-actions-for-the-iam-role-in-accountb>Part 2: Actions for the IAM Role in AccountB<a hidden class=anchor aria-hidden=true href=#part-2-actions-for-the-iam-role-in-accountb>#</a></h3><p>To allow an EC2 Instance in AccountB to access a repository in AccountA, the AccountB administrator must create a IAM Role that can be attached to an EC2 Instance in AccountB. This role must be configured with a policy that allows the EC2 Instance to assume the role created in the AccountA.</p><p>The following sections provide steps and examples.</p><h4 id=step-1-create-a-policy-for-repo-access-in-accountb>Step 1: Create a policy for repo access in AccountB<a hidden class=anchor aria-hidden=true href=#step-1-create-a-policy-for-repo-access-in-accountb>#</a></h4><pre tabindex=0><code>{
  &#34;Version&#34;: &#34;2012-10-17&#34;,
  &#34;Statement&#34;: {
    &#34;Effect&#34;: &#34;Allow&#34;,
    &#34;Action&#34;: &#34;sts:AssumeRole&#34;,
    &#34;Resource&#34;: &#34;arn:aws:iam::${ACCOUNTA_ID}:role/CrossAccountRepoAccessRole&#34;
  }
}
</code></pre><h4 id=step-2-create-a-role-for-an-aws-service-ec2>Step 2: Create a role for an AWS Service &ldquo;EC2&rdquo;<a hidden class=anchor aria-hidden=true href=#step-2-create-a-role-for-an-aws-service-ec2>#</a></h4><p>Create a new Role <code>CrossAccountRepoAccessRole</code> for an AWS Service &ldquo;EC2&rdquo; (it will create the following trust relationship for the role to be assummed from an EC2 Instance ) and attach the above policy to that role.</p><pre tabindex=0><code>{
    &#34;Version&#34;: &#34;2012-10-17&#34;,
    &#34;Statement&#34;: [
        {
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Principal&#34;: {
                &#34;Service&#34;: &#34;ec2.amazonaws.com&#34;
            },
            &#34;Action&#34;: &#34;sts:AssumeRole&#34;
        }
    ]
}
</code></pre><hr><h3 id=part-3-configuration-on-ec2-instance-in-accountb>Part 3: Configuration on EC2 Instance in AccountB<a hidden class=anchor aria-hidden=true href=#part-3-configuration-on-ec2-instance-in-accountb>#</a></h3><p>To access the repositories in AccountA, users in the AccountB must configure the EC2 Instance for repositories access. The following sections provide steps and examples.</p><blockquote><p>Prerequisite: Please make sure <code>AWS CLI</code> and <code>git</code> package is installed.</p></blockquote><h4 id=step-1-configure-the-aws-cli-and-git-for-an-accountb-ec2-instance-to-access-the-repositories-in-accounta>Step 1: Configure the AWS CLI and Git for an AccountB EC2 Instance to access the repositories in AccountA<a hidden class=anchor aria-hidden=true href=#step-1-configure-the-aws-cli-and-git-for-an-accountb-ec2-instance-to-access-the-repositories-in-accounta>#</a></h4><p>You need to configure the AWS CLI either by using the <code>aws configure --profile</code> command or editing the <code>~/.aws/config</code> file.</p><pre tabindex=0><code>[profile cross-account-role]
role_arn = arn:aws:iam::${ACCOUNTA_ID}:role/CrossAccountRepoAccessRole
credential_source = Ec2InstanceMetadata
region = us-east-2
</code></pre><p>You then want to confirm whether you&rsquo;ve set your permissions correctly, you can do:</p><pre tabindex=0><code>aws --profile cross-account-role get-repository --repository-name ${REPO_NAME_IN_ACCOUNTA}`
</code></pre><p>Once above is successful, you can configure the git client to use the credential-helper with the correct profile, in your ~/.gitconfig by running:</p><pre tabindex=0><code>git config --global credential.helper &#39;!aws codecommit --profile &#39;&#34;$PROFILE_NAME&#34;&#39; credential-helper $@&#39;
git config --global credential.UseHttpPath true
</code></pre><pre tabindex=0><code>git clone --branch ${BRANCH_NAME} ${REPO_NAME_IN_ACCOUNTA}`
</code></pre><h2 id=conlusion>Conlusion<a hidden class=anchor aria-hidden=true href=#conlusion>#</a></h2><p>You can keep your code in CodeCommit Repositories in a central AWS Account and can access from different AWS Accounts using the IAM Roles. Please don&rsquo;t forget to follow the principle of least privileges while configuring above policies in Production environments.</p><p>Hope you find this post helpful.</p><hr><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://docs.aws.amazon.com/codecommit/latest/userguide/cross-account.html>Configure cross-account access to an AWS CodeCommit repository using roles</a></li><li><a href=https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html>Installing or updating the latest version of the AWS CLI</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://www.logsec.cloud/posts/upload-csv-to-elastic/><span class=title>Next »</span><br><span>Upload CSV Data to Elasticsearch</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=harwinds/logsec data-repo-id=R_kgDOGjnARg data-category=Announcements data-category-id=DIC_kwDOGjnARs4CAWru data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=dark data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.logsec.cloud>logsec</a></span>
<span>Powered:
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>